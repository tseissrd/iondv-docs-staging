### Предыдущая страница: [Вычисляемые атрибуты](/docs/ru/2_system_description/metadata_structure/meta_class/atr_formula.md#вычисляемые-атрибуты-без-кеширования)

# Переменные 
## Значение атрибутов

`$` - применяется вместе с системным наименованием атрибута и возвращает значение указанного атрибута, т.е. если указать `$name` при формировании какого-либо условия для действий над значениями атрибутов, то значение атрибута `name` и будет источником для заданного условия.

_пример применения для вычислямого атрибута_
```
{
  "formula": {
        "count": [
            "$projects"
        ]
      }
   ...
}
```
В текущем классе есть атрибут типа "Коллекция"  `projects` и, согласно формуле, необходимо посчитать колличество значений данного атрибута.

Результат: количество объектов атрибута `projects`

## Текущая дата/время, дата

`$$now` - возвращает текущую дату и время

_пример применения для фильтра допустимых значений_
в навигации:
```json
{
      "property": "dateEnd",
      "operation": 5,
      "value": [
        "$$now"
      ],
      "nestedConditions": []
    }
```
"dateEnd" меньше текущей даты/времени

_пример применения для вывода значения по умолчанию_
в мете класса:
```json
...
"defaultValue": "$$now",
...
```

`$$today` - возвращает начало суток текущей даты 
_принцип тот же, только дата без времени_

## Синтаксис форматирования дат в формате momentjs

```
'DD.MM.YYYY'
```

```
NB. В драйвере к монгодб поддерживаются только основные возможности формата momentjs 
```

## Текущий пользователь

`$$uid` - возвращает текущего пользователя

_пример применения для фильтра допустимых значений в коллекции:_

```json
{
"property": "collectionAttr",
"operation": 10,
"nestedConditions": [
   {
      "property": "user",
      "operation": 0,
      "value": ["$$uid"]
   }
] 
}
```
по ссылке атрибута типа "коллекция" отображать только те объекты, у которых значение атрибута "user" совпадает со значением текущего пользователя.

--------------------------------------------------------------------------  


#### [Licence](/LICENSE) &ensp;  [Contact us](https://iondv.com/portal/contacts) &ensp;  [English](/docs/en/2_system_description/metadata_structure/meta_variables.md) &ensp;
<div><img src="https://mc.iondv.com/watch/local/docs/framework" style="position:absolute; left:-9999px;" height=1 width=1 alt="iondv metrics"></div>         



--------------------------------------------------------------------------  

Copyright (c) 2018 **LLC "ION DV"**.   
All rights reserved. 